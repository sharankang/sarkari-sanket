<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sarkari Sanket</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="css/style.css"/>
  
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-messaging-compat.js"></script>
</head>
<body class="bg-gray-50 font-inter">

  <nav class="fixed top-0 left-0 w-full bg-white shadow-md z-50">
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
      <a href="#home" class="text-2xl font-extrabold text-green-600">Sarkari Sanket</a>
      
      <div class="hidden md:flex space-x-8 text-gray-700 font-medium items-center">
        <a href="#home" class="hover:text-green-600 transition">Home</a>
        <a href="#analyze" class="hover:text-green-600 transition">Analyze Bill</a>
        <a href="#compare" class="hover:text-green-600 transition">Compare</a>
        <a href="#history" id="nav-history" class="hover:text-green-600 transition">History</a>
        <a href="#about" class="hover:text-green-600 transition">About</a>

        <div id="auth-links">
            <button id="login-btn" class="text-gray-700 font-medium hover:text-green-600 transition">Login</button>
            <button id="signup-btn" class="bg-green-600 text-white px-5 py-2 rounded-full font-medium hover:bg-green-700 transition ml-2">Sign Up</button>
        </div>

        <div id="user-info" class="hidden items-center">
            <a href="#profile-section" id="nav-profile" class="text-gray-700 font-medium hover:text-green-600 transition mr-4">My Profile</a>
            <span id="user-email" class="text-sm text-gray-600 mr-4"></span>
            <button id="logout-btn" class="bg-red-500 text-white px-5 py-2 rounded-full font-medium hover:bg-red-600 transition text-xs">Logout</button>
        </div>
      </div>
      <button id="menu-btn" class="md:hidden text-gray-700 focus:outline-none">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
      </button>
    </div>
  </nav>

  <section id="home" class="relative bg-gradient-to-r from-green-600 to-orange-500 text-white min-h-screen flex flex-col justify-center items-center text-center px-6 pt-24">
    <h1 class="text-5xl md:text-7xl font-extrabold mb-6 drop-shadow-lg text-white">Welcome to Sarkari Sanket</h1>
    <p class="text-lg md:text-2xl max-w-2xl mb-10 text-orange-100">
      Your AI-powered guide to understanding government bills and policies.
    </p>
    <button onclick="scrollToForm()" class="bg-white text-green-700 font-bold py-4 px-10 rounded-full shadow-xl transform hover:scale-110 transition duration-300">
      Start Analyzing
    </button>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-16 max-w-5xl">
      <div class="bg-white text-gray-800 rounded-2xl p-8 shadow-lg hover:shadow-2xl transition text-center">
        <h3 class="text-xl font-bold mb-3">Simplified Bills</h3>
        <p>Get complex government documents broken down into easy-to-understand summaries.</p>
      </div>
      <div class="bg-white text-gray-800 rounded-2xl p-8 shadow-lg hover:shadow-2xl transition text-center">
        <h3 class="text-xl font-bold mb-3">Public Sentiment</h3>
        <p>See how people feel about each bill with AI-powered sentiment analysis.</p>
      </div>
      <div class="bg-white text-gray-800 rounded-2xl p-8 shadow-lg hover:shadow-2xl transition text-center">
        <h3 class="text-xl font-bold mb-3">Impact Scorer</h3>
        <p>Real-time ratings on how policies affect specific demographic groups.</p>
      </div>
    </div>
  </section>

  <main id="analyze" class="container mx-auto px-4 py-20">
    <div class="max-w-2xl mx-auto bg-white p-6 md:p-8 rounded-xl shadow-lg border border-gray-100">
      <form id="bill-form">
        <div class="mb-6">
          <label for="billName" class="block text-gray-800 font-bold mb-3 text-lg">Enter Bill Name</label>
          <input type="text" id="billName" class="shadow-inner border border-gray-300 rounded-lg w-full py-3 px-4 focus:ring-2 focus:ring-blue-500" placeholder="e.g., Digital Personal Data Protection Bill" />
        </div>
        <div class="relative flex items-center my-6"><div class="flex-grow border-t border-gray-300"></div><span class="mx-4 text-gray-400 italic">OR</span><div class="flex-grow border-t border-gray-300"></div></div>
        <div class="mb-8">
            <label for="billFile" class="block text-gray-800 font-bold mb-3 text-lg">Upload Bill (PDF)</label>
            <input type="file" id="billFile" name="billFile" class="block w-full text-sm text-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" accept=".pdf" />
        </div>
        <div class="mb-8 text-center">
          <label class="toggle-label inline-flex items-center cursor-pointer">
            <span class="toggle-text text-gray-800 mr-3" id="lang-en">English</span>
            <input type="checkbox" id="language-toggle" class="toggle-input hidden">
            <div class="toggle-switch w-12 h-6 bg-gray-300 rounded-full relative transition-colors duration-300"></div>
            <span class="toggle-text text-gray-400 ml-3" id="lang-hi">Hinglish</span>
          </label>
        </div>
        <div class="text-center">
          <button type="submit" id="submit-button" class="bg-blue-700 hover:bg-blue-800 text-white font-bold py-4 px-12 rounded-lg text-lg transform hover:scale-105 transition shadow-xl w-full">Analyze Bill</button>
        </div>
      </form>
      <p id="error-message" class="text-red-600 font-semibold text-center mt-4"></p>
    </div>

    <div id="results-wrapper" class="hidden mt-12 space-y-12 max-w-6xl mx-auto animate-fade-in">
      
      <div id="summary-section" class="bg-white p-8 md:p-12 rounded-2xl shadow-xl border">
        <h2 id="summary-title" class="text-3xl font-extrabold text-gray-900 mb-2">Policy Summary</h2>
        <div id="source-info" class="text-xs text-gray-400 mb-6 uppercase border-b pb-4"></div>
        <div id="summary-content" class="text-gray-700 leading-relaxed text-lg prose prose-blue max-w-none"></div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div class="bg-white p-8 rounded-2xl shadow-lg border">
          <h2 class="text-2xl font-bold text-gray-900 mb-4 text-center">Public Sentiment</h2>
          <div id="sentiment-bar-wrapper">
            <div id="sentiment-bar" class="flex w-full h-10 bg-gray-100 rounded-full overflow-hidden shadow-inner"></div>
            <div class="flex justify-between mt-4 text-[10px] font-bold uppercase text-gray-500">
              <span class="text-green-600">‚óè Positive</span>
              <span class="text-red-600">‚óè Negative</span>
              <span>‚óè Neutral</span>
            </div>
          </div>
          <p id="sentiment-note" class="mt-6 text-gray-600 italic text-center text-sm"></p>
        </div>

        <div id="impact-section" class="hidden bg-white p-8 rounded-2xl shadow-lg border">
          <h2 class="text-2xl font-bold text-gray-900 mb-6 text-center">Demographic Impact</h2>
          <div id="impact-grid" class="grid grid-cols-2 gap-4"></div>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div id="chatbot-section" class="bg-white p-8 rounded-2xl shadow-lg border flex flex-col h-[500px]">
          <h2 class="text-2xl font-bold mb-4 flex items-center justify-center">üí¨ Sarkari Mitra</h2>
          <div id="chat-box" class="flex-grow overflow-y-auto p-4 mb-4 bg-gray-50 rounded-xl space-y-4 border border-gray-100">
            <p class="text-gray-400 italic text-sm text-center">Hello! You can ask follow-up questions about this bill.</p>
          </div>
          <div class="flex bg-gray-100 p-2 rounded-full shadow-inner">
              <input type="text" id="chat-input" class="flex-grow bg-transparent px-4 focus:outline-none text-sm" placeholder="Ask about tax impact...">
              <button id="chat-send" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-full font-bold transition">Ask</button>
          </div>
        </div>

        <div id="news-section" class="hidden bg-white p-8 rounded-2xl shadow-lg border h-[500px] flex flex-col text-center">
          <h2 class="text-2xl font-bold mb-6">üóûÔ∏è Related News</h2>
          <div id="news-feed" class="space-y-6 overflow-y-auto pr-2 flex-grow"></div>
        </div>
      </div>
    </div>
  </main>

  <section id="compare" class="bg-white py-24">
    <div class="max-w-3xl mx-auto px-6">
      <div class="bg-gray-50 p-10 rounded-3xl shadow-xl border border-gray-100">
        <h2 class="text-4xl font-black text-center mb-8 tracking-tight">Fine-Print Comparison</h2>
        <form id="compare-form" class="space-y-6">
          <input type="text" id="compareBillName" class="border rounded-xl w-full py-4 px-6 focus:ring-2 focus:ring-green-500" placeholder="Current Bill Name" required>
          <input type="number" id="olderYear" class="border rounded-xl w-full py-4 px-6 focus:ring-2 focus:ring-green-500" placeholder="Older Version Year (e.g. 2019)" required>
          <select id="compareLanguage" class="border rounded-xl w-full py-4 px-6 focus:ring-2 focus:ring-green-500">
            <option value="English">English</option><option value="Hinglish">Hinglish</option>
          </select>
          <button type="submit" id="compare-button" class="bg-green-600 text-white font-bold py-5 rounded-xl w-full shadow-lg hover:bg-green-700 transition">Compare Now</button>
        </form>
        <p id="compare-error" class="text-red-600 text-center mt-6"></p>
      </div>
      <div id="compare-results" class="hidden mt-12 bg-white p-10 rounded-3xl shadow-2xl border-t-8 border-green-500">
        <h3 class="text-2xl font-black mb-6 border-b pb-4">Major Changes Found</h3>
        <div id="compare-content" class="text-gray-700 leading-relaxed text-lg"></div>
      </div>
    </div>
  </section>

  <section id="profile-section" class="container mx-auto px-4 py-24 hidden">
    <div class="max-w-5xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-12">
      <div class="lg:col-span-2 bg-white p-10 rounded-3xl shadow-xl border">
        <h2 class="text-3xl font-black mb-4">User Dashboard</h2>
        <p class="text-gray-400 mb-10">We match new bills to your Occupation and State to send you alerts.</p>
        <form id="profile-form" class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div><label class="text-xs font-bold uppercase text-gray-400">State</label><input type="text" id="profile-state" class="border rounded-xl p-4 bg-gray-50 w-full" required></div>
          <div><label class="text-xs font-bold uppercase text-gray-400">Occupation</label><input type="text" id="profile-occupation" class="border rounded-xl p-4 bg-gray-50 w-full" required></div>
          <div><label class="text-xs font-bold uppercase text-gray-400">Age</label><input type="number" id="profile-age" class="border rounded-xl p-4 bg-gray-50 w-full" required></div>
          <div><label class="text-xs font-bold uppercase text-gray-400">Sex</label><select id="profile-sex" class="border rounded-xl p-4 bg-gray-50 w-full"><option value="male">Male</option><option value="female">Female</option></select></div>
          <div><label class="text-xs font-bold uppercase text-gray-400">Annual Income</label><input type="number" id="profile-income" class="border rounded-xl p-4 bg-gray-50 w-full" required></div>
          <div><label class="text-xs font-bold uppercase text-gray-400">Category</label><select id="profile-category" class="border rounded-xl p-4 bg-gray-50 w-full"><option value="general">General</option><option value="obc">OBC</option><option value="sc">SC</option><option value="st">ST</option><option value="pwd">PwD</option></select></div>
          <div class="col-span-full"><label class="text-xs font-bold uppercase text-gray-400">Marital Status</label><select id="profile-marital-status" class="border rounded-xl p-4 bg-gray-50 w-full"><option value="single">Single</option><option value="married">Married</option><option value="widowed">Widowed</option></select></div>
          
          <div id="only-girl-child-field" class="hidden col-span-full"><label class="text-xs font-bold uppercase text-gray-400">Only Girl Child?</label><select id="profile-only-girl-child" class="border rounded-xl p-4 bg-gray-50 w-full"><option value="no">No</option><option value="yes">Yes</option></select></div>
          <div id="parental-status-field" class="hidden col-span-full"><label class="text-xs font-bold uppercase text-gray-400">Parental Status</label><select id="profile-parental-status" class="border rounded-xl p-4 bg-gray-50 w-full"><option value="both_alive">Both Parents Alive</option><option value="orphan">Orphan</option></select></div>
          
          <button type="submit" id="profile-save-btn" class="bg-blue-700 text-white font-bold py-4 rounded-xl col-span-full shadow-lg">Save Full Dashboard</button>
        </form>
        <p id="profile-message" class="text-center mt-4 font-bold"></p>
      </div>
      <div class="bg-blue-50 p-8 rounded-3xl shadow-lg">
        <h3 class="text-xl font-bold text-blue-900 mb-6">Matching Schemes</h3>
        <div id="scheme-loader" class="hidden text-center py-10"><div class="loader-blue mx-auto"></div></div>
        <div id="scheme-list" class="space-y-4"></div>
      </div>
    </div>
  </section>

  <section id="history" class="container mx-auto px-6 py-24">
    <h2 class="text-3xl font-black text-center mb-10">Recent Search Activity</h2>
    <div id="history-list" class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <p id="no-history" class="text-gray-400 col-span-full text-center">Login to view history.</p>
    </div>
  </section>

  <footer class="text-center py-12 text-gray-400 bg-white border-t">
    <p class="text-xs uppercase font-bold tracking-widest">&copy; 2025 Sarkari Sanket Labs. Empowerment through simplified insight.</p>
  </footer>

  <div id="login-modal" class="hidden fixed inset-0 bg-gray-900/90 backdrop-blur-sm flex items-center justify-center z-[100] p-4">
    <div class="bg-white p-10 rounded-3xl shadow-2xl w-full max-w-md relative overflow-hidden text-center">
      <button id="close-login-modal" class="absolute top-4 right-6 text-gray-300 text-4xl hover:text-red-500 transition">&times;</button>
      <h2 class="text-3xl font-black text-gray-800 mb-8">Sign In</h2>
      <form id="login-form" class="space-y-6">
        <input type="email" id="login-email" class="w-full p-4 border rounded-2xl bg-gray-50 focus:ring-2 focus:ring-blue-600 transition" placeholder="Email" required>
        <input type="password" id="login-password" class="w-full p-4 border rounded-2xl bg-gray-50 focus:ring-2 focus:ring-blue-600 transition" placeholder="Password" required>
        <button type="submit" class="w-full bg-blue-700 text-white py-4 rounded-2xl font-black shadow-xl hover:bg-blue-800 transition">Go to Dashboard</button>
        <p id="login-error" class="text-red-500 text-xs font-bold mt-2"></p>
      </form>
    </div>
  </div>

  <div id="signup-modal" class="hidden fixed inset-0 bg-gray-900/90 backdrop-blur-sm flex items-center justify-center z-[100] p-4">
    <div class="bg-white p-10 rounded-3xl shadow-2xl w-full max-w-md relative text-center">
      <button id="close-signup-modal" class="absolute top-4 right-6 text-gray-300 text-4xl hover:text-red-500 transition">&times;</button>
      <h2 class="text-3xl font-black text-gray-800 mb-8">Create Account</h2>
      <form id="signup-form" class="space-y-6">
        <input type="email" id="signup-email" class="w-full p-4 border rounded-2xl bg-gray-50 focus:ring-2 focus:ring-green-600" placeholder="Email" required>
        <input type="password" id="signup-password" class="w-full p-4 border rounded-2xl bg-gray-50 focus:ring-2 focus:ring-green-600" placeholder="Password" required>
        <button type="submit" class="w-full bg-green-600 text-white py-4 rounded-2xl font-black shadow-xl">Sign Up</button>
        <p id="signup-error" class="text-red-500 text-xs font-bold mt-2"></p>
      </form>
    </div>
  </div>

  <script src="js/script.js"></script>
</body>
</html>